# C4 Model: Code Diagram

## Overview

The Code diagram shows how specific components are implemented as classes and interfaces. This level of detail is optional and typically generated from the code itself.

## Key Class Hierarchies

### Polymorphism Example

```mermaid
classDiagram
    class Animal {
        <<abstract>>
        +string Name
        +int Age
        +MakeSound() void
        +Move() void
    }

    class Dog {
        +string Breed
        +MakeSound() void
        +Move() void
        +Fetch() void
    }

    class Cat {
        +bool IsIndoor
        +MakeSound() void
        +Move() void
        +Climb() void
    }

    class Bird {
        +double WingSpan
        +MakeSound() void
        +Move() void
        +Fly() void
    }

    Animal <|-- Dog
    Animal <|-- Cat
    Animal <|-- Bird
```

### Covariance/Contravariance

```mermaid
classDiagram
    class IRepository~out T~ {
        <<interface>>
        +GetAll() IEnumerable~T~
        +GetById(id) T
    }

    class IComparer~in T~ {
        <<interface>>
        +Compare(x, y) int
    }

    class AnimalRepository {
        +GetAll() IEnumerable~Animal~
        +GetById(id) Animal
    }

    class AnimalComparer {
        +Compare(x, y) int
    }

    IRepository~Animal~ <|.. AnimalRepository
    IComparer~Animal~ <|.. AnimalComparer
```

### SOLID Principles

```mermaid
classDiagram
    class IRepository~T~ {
        <<interface>>
        +GetById(id) T
        +Add(entity) void
        +Update(entity) void
        +Delete(id) void
    }

    class IValidator~T~ {
        <<interface>>
        +Validate(entity) ValidationResult
    }

    class IService~T~ {
        <<interface>>
        +Process(entity) Result~T~
    }

    class UserRepository {
        +GetById(id) User
        +Add(user) void
        +Update(user) void
        +Delete(id) void
    }

    class UserValidator {
        +Validate(user) ValidationResult
    }

    class UserService {
        -IRepository~User~ repository
        -IValidator~User~ validator
        +Process(user) Result~User~
    }

    IRepository~User~ <|.. UserRepository
    IValidator~User~ <|.. UserValidator
    IService~User~ <|.. UserService
    UserService --> IRepository~User~
    UserService --> IValidator~User~
```

### Result Pattern

```mermaid
classDiagram
    class Result~TValue, TError~ {
        <<abstract>>
        +bool IsSuccess
        +bool IsFailure
        +Match(onSuccess, onFailure) TResult
        +Then(next) Result
        +Map(mapper) Result
    }

    class Success~TValue, TError~ {
        +TValue Value
        +Match(onSuccess, onFailure) TResult
    }

    class Failure~TValue, TError~ {
        +TError Error
        +Match(onSuccess, onFailure) TResult
    }

    Result~TValue, TError~ <|-- Success~TValue, TError~
    Result~TValue, TError~ <|-- Failure~TValue, TError~
```

## Package Structure

```
src/AdvancedConcepts.Core/
├── Beginner/
│   ├── PolymorphismBasics.cs
│   ├── InheritanceExamples.cs
│   └── InterfaceBasics.cs
├── Intermediate/
│   ├── BoxingUnboxingExamples.cs
│   ├── CovarianceExamples.cs
│   ├── ContravarianceExamples.cs
│   └── GenericVarianceExamples.cs
├── Advanced/
│   ├── PatternMatchingExamples.cs
│   ├── LinqAdvancedExamples.cs
│   ├── AsyncAwaitExamples.cs
│   ├── PerformancePatterns.cs
│   ├── DIExamples.cs
│   ├── PollyExamples.cs
│   ├── ValidationExamples.cs
│   ├── ResultPattern.cs
│   ├── EnhancedSerilogExamples.cs
│   ├── OpenTelemetryExamples.cs
│   └── HealthCheckExamples.cs
└── Program.cs
```

## References

- [C4 Code Diagram](https://c4model.com/#CodeDiagram)
- [UML Class Diagrams](https://www.uml-diagrams.org/class-diagrams-overview.html)

---

**Abstraction Level:** Level 4 - Code
**Target Audience:** Developers (implementation details)
**Last Updated:** 2025-11-30
**Note:** For complete code-level documentation, see API reference generated by DocFX
