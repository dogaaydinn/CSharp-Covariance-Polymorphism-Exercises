<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>C4 Model: Container Diagram | Advanced C# Concepts </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="C4 Model: Container Diagram | Advanced C# Concepts ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/dogaaydinn/CSharp-Covariance-Polymorphism-Exercises/blob/master/docs/architecture/02-c4-diagrams/container-diagram.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="c4-model-container-diagram">C4 Model: Container Diagram</h1>

<h2 id="overview">Overview</h2>
<p>The Container diagram zooms into the Advanced C# Concepts system and shows the high-level shape of the software architecture and how responsibilities are distributed across it. It shows the major technology choices and how the containers communicate with one another.</p>
<h2 id="diagram">Diagram</h2>
<pre><code class="lang-mermaid">C4Container
    title Container Diagram - Advanced C# Concepts

    Person(developer, &quot;Developer&quot;, &quot;Learning advanced C# concepts&quot;)

    System_Boundary(advancedConcepts, &quot;Advanced C# Concepts System&quot;) {
        Container(coreApp, &quot;Core Application&quot;, &quot;.NET 8 Console&quot;, &quot;Main demonstration application with examples&quot;)
        Container(unitTests, &quot;Unit Test Suite&quot;, &quot;xUnit&quot;, &quot;119 unit tests with comprehensive coverage&quot;)
        Container(integrationTests, &quot;Integration Test Suite&quot;, &quot;xUnit&quot;, &quot;9 integration tests&quot;)
        Container(benchmarks, &quot;Performance Benchmarks&quot;, &quot;BenchmarkDotNet&quot;, &quot;30+ benchmarks across 5 categories&quot;)
        Container(docs, &quot;Documentation Site&quot;, &quot;DocFX / GitHub Pages&quot;, &quot;API documentation and guides&quot;)
    }

    System_Boundary(observability, &quot;Observability Stack&quot;) {
        ContainerDb(seq, &quot;Seq Server&quot;, &quot;Seq&quot;, &quot;Structured log aggregation&quot;)
        ContainerDb(prometheus, &quot;Prometheus&quot;, &quot;Time-Series DB&quot;, &quot;Metrics storage&quot;)
        Container(grafana, &quot;Grafana&quot;, &quot;Visualization&quot;, &quot;Dashboards and alerts&quot;)
    }

    System_Boundary(cicd, &quot;CI/CD Pipeline&quot;) {
        Container(githubActions, &quot;GitHub Actions&quot;, &quot;Workflow Engine&quot;, &quot;5 automated workflows&quot;)
        Container(codeql, &quot;CodeQL&quot;, &quot;Security Scanner&quot;, &quot;Semantic code analysis&quot;)
        Container(stryker, &quot;Stryker.NET&quot;, &quot;Mutation Tester&quot;, &quot;Test quality validation&quot;)
    }

    System_Ext(ghcr, &quot;GitHub Container Registry&quot;, &quot;Docker image hosting&quot;)
    System_Ext(nuget, &quot;NuGet.org&quot;, &quot;Package repository&quot;)
    System_Ext(githubPages, &quot;GitHub Pages&quot;, &quot;Static site hosting&quot;)

    Rel(developer, coreApp, &quot;Runs examples&quot;, &quot;CLI&quot;)
    Rel(developer, benchmarks, &quot;Executes benchmarks&quot;, &quot;CLI&quot;)
    Rel(developer, docs, &quot;Reads documentation&quot;, &quot;HTTPS&quot;)

    Rel(coreApp, seq, &quot;Sends logs&quot;, &quot;HTTP/JSON&quot;)
    Rel(coreApp, prometheus, &quot;Exposes metrics&quot;, &quot;HTTP&quot;)
    Rel(grafana, prometheus, &quot;Queries&quot;, &quot;HTTP&quot;)

    Rel(githubActions, unitTests, &quot;Runs&quot;, &quot;dotnet test&quot;)
    Rel(githubActions, integrationTests, &quot;Runs&quot;, &quot;dotnet test&quot;)
    Rel(githubActions, benchmarks, &quot;Executes&quot;, &quot;dotnet run&quot;)
    Rel(githubActions, codeql, &quot;Triggers&quot;, &quot;Workflow&quot;)
    Rel(githubActions, stryker, &quot;Executes&quot;, &quot;dotnet stryker&quot;)

    Rel(githubActions, ghcr, &quot;Publishes images&quot;, &quot;HTTPS&quot;)
    Rel(githubActions, nuget, &quot;Publishes packages&quot;, &quot;HTTPS&quot;)
    Rel(githubActions, githubPages, &quot;Deploys docs&quot;, &quot;Git&quot;)

    UpdateLayoutConfig($c4ShapeInRow=&quot;3&quot;, $c4BoundaryInRow=&quot;1&quot;)
</code></pre>
<h2 id="containers">Containers</h2>
<h3 id="core-system-containers">Core System Containers</h3>
<h4 id="core-application">Core Application</h4>
<ul>
<li><strong>Technology:</strong> .NET 8 Console Application</li>
<li><strong>Purpose:</strong> Main demonstration application</li>
<li><strong>Responsibilities:</strong>
<ul>
<li>Advanced C# concept demonstrations</li>
<li>Polymorphism examples</li>
<li>Covariance/contravariance patterns</li>
<li>Performance optimization examples</li>
<li>Enterprise architecture patterns</li>
</ul>
</li>
<li><strong>Key Components:</strong>
<ul>
<li>Beginner examples</li>
<li>Intermediate examples</li>
<li>Advanced examples</li>
<li>SOLID principles</li>
<li>Design patterns</li>
</ul>
</li>
<li><strong>External Dependencies:</strong>
<ul>
<li>Serilog for logging</li>
<li>OpenTelemetry for tracing</li>
<li>Polly for resilience</li>
<li>FluentValidation</li>
</ul>
</li>
</ul>
<h4 id="unit-test-suite">Unit Test Suite</h4>
<ul>
<li><strong>Technology:</strong> xUnit with multiple frameworks</li>
<li><strong>Purpose:</strong> Comprehensive unit testing</li>
<li><strong>Test Count:</strong> 119 unit tests</li>
<li><strong>Frameworks:</strong>
<ul>
<li>xUnit (test framework)</li>
<li>FluentAssertions (assertions)</li>
<li>Moq + NSubstitute (mocking)</li>
<li>AutoFixture + Bogus (test data)</li>
<li>FsCheck (property-based testing)</li>
</ul>
</li>
<li><strong>Coverage:</strong> 6.57% (baseline for educational codebase)</li>
<li><strong>Execution Time:</strong> &lt;10 seconds</li>
</ul>
<h4 id="integration-test-suite">Integration Test Suite</h4>
<ul>
<li><strong>Technology:</strong> xUnit</li>
<li><strong>Purpose:</strong> System-level testing</li>
<li><strong>Test Count:</strong> 9 integration tests</li>
<li><strong>Focus Areas:</strong>
<ul>
<li>Performance integration tests</li>
<li>End-to-end scenarios</li>
<li>Cross-component interactions</li>
</ul>
</li>
<li><strong>Execution Time:</strong> ~5 seconds</li>
</ul>
<h4 id="performance-benchmarks">Performance Benchmarks</h4>
<ul>
<li><strong>Technology:</strong> BenchmarkDotNet</li>
<li><strong>Purpose:</strong> Performance measurement and regression detection</li>
<li><strong>Benchmark Categories:</strong>
<ol>
<li>Boxing/Unboxing (4 benchmarks)</li>
<li>Polymorphism (4 benchmarks)</li>
<li>LINQ Performance (8 benchmarks)</li>
<li>Span<t> Operations (8 benchmarks)</t></li>
<li>Type Conversion (6 benchmarks)</li>
</ol>
</li>
<li><strong>Output Formats:</strong> HTML, Markdown, CSV, JSON</li>
<li><strong>Diagnoser:</strong> MemoryDiagnoser for allocation tracking</li>
</ul>
<h4 id="documentation-site">Documentation Site</h4>
<ul>
<li><strong>Technology:</strong> DocFX + GitHub Pages</li>
<li><strong>Purpose:</strong> Comprehensive documentation</li>
<li><strong>Content:</strong>
<ul>
<li>API reference (auto-generated)</li>
<li>Architecture documentation</li>
<li>User guides and tutorials</li>
<li>Advanced topics</li>
<li>Performance guides</li>
</ul>
</li>
<li><strong>Hosting:</strong> GitHub Pages (static site)</li>
<li><strong>URL:</strong> <a href="https://dogaaydinn.github.io/advancedconcepts">https://dogaaydinn.github.io/advancedconcepts</a></li>
</ul>
<h3 id="observability-containers">Observability Containers</h3>
<h4 id="seq-server">Seq Server</h4>
<ul>
<li><strong>Technology:</strong> Seq (Datalust)</li>
<li><strong>Purpose:</strong> Structured log aggregation and analysis</li>
<li><strong>Port:</strong> 5341 (ingestion), 5342 (UI)</li>
<li><strong>Features:</strong>
<ul>
<li>Full-text search</li>
<li>Structured querying</li>
<li>Real-time tail</li>
<li>Alerting</li>
</ul>
</li>
<li><strong>Environment:</strong> Development, Staging</li>
<li><strong>Data Retention:</strong> 7 days</li>
</ul>
<h4 id="prometheus">Prometheus</h4>
<ul>
<li><strong>Technology:</strong> Prometheus Time-Series Database</li>
<li><strong>Purpose:</strong> Metrics collection and storage</li>
<li><strong>Port:</strong> 9090</li>
<li><strong>Scrape Interval:</strong> 15 seconds</li>
<li><strong>Metrics:</strong>
<ul>
<li>Request counters</li>
<li>Duration histograms</li>
<li>Active connections</li>
<li>Error rates</li>
<li>Custom business metrics</li>
</ul>
</li>
<li><strong>Retention:</strong> 15 days</li>
</ul>
<h4 id="grafana">Grafana</h4>
<ul>
<li><strong>Technology:</strong> Grafana</li>
<li><strong>Purpose:</strong> Metrics visualization and dashboards</li>
<li><strong>Port:</strong> 3000</li>
<li><strong>Dashboards:</strong>
<ul>
<li>Application Performance</li>
<li>Resource Utilization</li>
<li>Error Tracking</li>
<li>Business Metrics</li>
</ul>
</li>
<li><strong>Data Sources:</strong> Prometheus</li>
</ul>
<h3 id="cicd-containers">CI/CD Containers</h3>
<h4 id="github-actions">GitHub Actions</h4>
<ul>
<li><strong>Technology:</strong> GitHub Actions Workflow Engine</li>
<li><strong>Purpose:</strong> Automated CI/CD pipeline</li>
<li><strong>Workflows:</strong>
<ol>
<li><strong>ci.yml</strong> - Build, test, coverage (multi-platform)</li>
<li><strong>cd.yml</strong> - Deploy to staging/production</li>
<li><strong>release.yml</strong> - Version, package, release</li>
<li><strong>performance.yml</strong> - Benchmark regression detection</li>
<li><strong>docs.yml</strong> - Documentation generation</li>
<li><strong>security.yml</strong> - Security scanning (7 tools)</li>
<li><strong>codeql.yml</strong> - Semantic code analysis</li>
</ol>
</li>
<li><strong>Runners:</strong> ubuntu-latest, windows-latest, macos-latest</li>
</ul>
<h4 id="codeql">CodeQL</h4>
<ul>
<li><strong>Technology:</strong> GitHub CodeQL</li>
<li><strong>Purpose:</strong> Semantic code analysis and security scanning</li>
<li><strong>Languages:</strong> C#</li>
<li><strong>Schedule:</strong> Weekly</li>
<li><strong>Queries:</strong> Default + security-extended</li>
<li><strong>Output:</strong> SARIF to GitHub Security tab</li>
</ul>
<h4 id="strykernet">Stryker.NET</h4>
<ul>
<li><strong>Technology:</strong> Mutation Testing Framework</li>
<li><strong>Purpose:</strong> Test quality validation</li>
<li><strong>Metrics:</strong>
<ul>
<li>Mutation score: 20.07% (baseline)</li>
<li>Mutants created: 399</li>
<li>Mutants tested: 85</li>
<li>Mutants killed: 56</li>
</ul>
</li>
<li><strong>Reports:</strong> HTML + JSON + Console</li>
</ul>
<h2 id="container-communication">Container Communication</h2>
<h3 id="internal-communication">Internal Communication</h3>
<h4 id="application--observability">Application → Observability</h4>
<pre><code>Core App → Seq (HTTP/JSON)
├── Structured logs (Serilog)
├── Log levels (Debug, Info, Warning, Error)
└── Context enrichment (Machine, Process, Thread)

Core App → Prometheus (HTTP)
├── Metrics endpoint (/metrics)
├── Counters (requests, errors)
├── Histograms (duration, size)
└── Gauges (active connections)
</code></pre>
<h4 id="cicd--tests">CI/CD → Tests</h4>
<pre><code>GitHub Actions → Unit Tests
├── dotnet test
├── Coverage collection
└── Result publishing

GitHub Actions → Integration Tests
├── dotnet test
├── Environment setup
└── Result publishing

GitHub Actions → Benchmarks
├── dotnet run --project Benchmarks
├── Baseline comparison
└── Regression detection
</code></pre>
<h3 id="external-communication">External Communication</h3>
<h4 id="github-actions--registries">GitHub Actions → Registries</h4>
<pre><code>GitHub Actions → GHCR
├── Docker build
├── Multi-platform images
├── Image push
└── SBOM generation

GitHub Actions → NuGet.org
├── dotnet pack
├── Package validation
├── Package push
└── Symbol packages

GitHub Actions → GitHub Pages
├── DocFX build
├── Static site generation
└── Git push to gh-pages branch
</code></pre>
<h2 id="technology-decisions">Technology Decisions</h2>
<h3 id="why-net-8">Why .NET 8?</h3>
<ul>
<li>LTS support until November 2026</li>
<li>15-25% performance improvement over .NET 6</li>
<li>C# 12 language features</li>
<li>Native AOT support</li>
</ul>
<h3 id="why-console-application">Why Console Application?</h3>
<ul>
<li><strong>Educational focus:</strong> Demonstrations don't need web UI</li>
<li><strong>Simplicity:</strong> Easy to understand and modify</li>
<li><strong>Performance:</strong> No HTTP overhead for benchmarks</li>
<li><strong>Portability:</strong> Runs anywhere .NET 8 runs</li>
</ul>
<h3 id="why-xunit">Why xUnit?</h3>
<ul>
<li><strong>Modern:</strong> Parallel test execution by default</li>
<li><strong>Extensible:</strong> Rich ecosystem</li>
<li><strong>Theory tests:</strong> Data-driven testing support</li>
<li><strong>Community:</strong> Industry standard</li>
</ul>
<h3 id="why-benchmarkdotnet">Why BenchmarkDotNet?</h3>
<ul>
<li><strong>Industry standard:</strong> Used by .NET team</li>
<li><strong>Accurate:</strong> Proper warm-up, statistical analysis</li>
<li><strong>Rich output:</strong> Multiple export formats</li>
<li><strong>Memory profiling:</strong> MemoryDiagnoser</li>
</ul>
<h3 id="why-seq-for-development">Why Seq for Development?</h3>
<ul>
<li><strong>Structured logging:</strong> Query by properties</li>
<li><strong>Easy setup:</strong> Docker container</li>
<li><strong>Free:</strong> For development use</li>
<li><strong>Rich UI:</strong> Excellent developer experience</li>
</ul>
<h3 id="why-prometheus--grafana">Why Prometheus + Grafana?</h3>
<ul>
<li><strong>Industry standard:</strong> Cloud-native metrics stack</li>
<li><strong>Pull model:</strong> Application exposes metrics</li>
<li><strong>PromQL:</strong> Powerful query language</li>
<li><strong>Grafana:</strong> Best-in-class visualization</li>
</ul>
<h2 id="deployment-architecture">Deployment Architecture</h2>
<h3 id="local-development">Local Development</h3>
<pre><code>docker-compose.yml
├── advancedconcepts (application)
├── seq (logs)
├── prometheus (metrics)
└── grafana (visualization)
</code></pre>
<h3 id="stagingproduction">Staging/Production</h3>
<pre><code>Kubernetes Cluster
├── Deployment (3 replicas)
├── Service (LoadBalancer)
├── ConfigMap (configuration)
├── Secret (sensitive data)
└── HPA (autoscaling 2-10 pods)
</code></pre>
<h2 id="scaling-considerations">Scaling Considerations</h2>
<h3 id="application-scaling">Application Scaling</h3>
<ul>
<li><strong>Horizontal:</strong> Kubernetes HPA (2-10 pods)</li>
<li><strong>Vertical:</strong> Resource limits (CPU: 1000m, Memory: 1Gi)</li>
<li><strong>Autoscaling triggers:</strong>
<ul>
<li>CPU &gt; 70%</li>
<li>Memory &gt; 80%</li>
</ul>
</li>
</ul>
<h3 id="observability-scaling">Observability Scaling</h3>
<ul>
<li><strong>Seq:</strong> Single instance (development only)</li>
<li><strong>Prometheus:</strong> Federated setup for production</li>
<li><strong>Grafana:</strong> High availability mode (3 replicas)</li>
</ul>
<h2 id="security">Security</h2>
<h3 id="container-security">Container Security</h3>
<ul>
<li><strong>Non-root user:</strong> Application runs as user 1000</li>
<li><strong>Minimal image:</strong> Alpine Linux (~100MB)</li>
<li><strong>No secrets in images:</strong> Environment variables only</li>
<li><strong>Image scanning:</strong> Trivy in CI/CD</li>
</ul>
<h3 id="network-security">Network Security</h3>
<ul>
<li><strong>TLS:</strong> All external communications</li>
<li><strong>Network policies:</strong> Kubernetes isolation</li>
<li><strong>Firewalls:</strong> Cloud provider firewalls</li>
</ul>
<h2 id="performance-characteristics">Performance Characteristics</h2>
<h3 id="container-performance">Container Performance</h3>
<table>
<thead>
<tr>
<th>Container</th>
<th>Startup</th>
<th>Memory</th>
<th>CPU</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core App</td>
<td>&lt;2s</td>
<td>~50MB</td>
<td>&lt;100m</td>
</tr>
<tr>
<td>Seq</td>
<td>&lt;5s</td>
<td>~200MB</td>
<td>&lt;200m</td>
</tr>
<tr>
<td>Prometheus</td>
<td>&lt;3s</td>
<td>~300MB</td>
<td>&lt;300m</td>
</tr>
<tr>
<td>Grafana</td>
<td>&lt;10s</td>
<td>~150MB</td>
<td>&lt;100m</td>
</tr>
</tbody>
</table>
<h3 id="test-execution">Test Execution</h3>
<table>
<thead>
<tr>
<th>Test Suite</th>
<th>Duration</th>
<th>Parallelization</th>
</tr>
</thead>
<tbody>
<tr>
<td>Unit Tests</td>
<td>~8s</td>
<td>Yes (per-class)</td>
</tr>
<tr>
<td>Integration</td>
<td>~5s</td>
<td>Yes (per-class)</td>
</tr>
<tr>
<td>Benchmarks</td>
<td>~5min</td>
<td>No (sequential)</td>
</tr>
<tr>
<td>Mutation</td>
<td>~2min</td>
<td>Yes (parallel)</td>
</tr>
</tbody>
</table>
<h2 id="references">References</h2>
<ul>
<li><a href="https://c4model.com/#ContainerDiagram">C4 Container Diagram</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/architecture/">.NET Architecture</a></li>
<li><a href="https://docs.docker.com/develop/dev-best-practices/">Docker Best Practices</a></li>
<li><a href="https://kubernetes.io/docs/concepts/">Kubernetes Patterns</a></li>
</ul>
<hr>
<p><strong>Abstraction Level:</strong> Level 2 - Container
<strong>Target Audience:</strong> Technical team (developers, architects)
<strong>Last Updated:</strong> 2025-11-30</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/dogaaydinn/CSharp-Covariance-Polymorphism-Exercises/blob/master/docs/architecture/02-c4-diagrams/container-diagram.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Copyright © 2024 - Advanced C# Concepts
        </div>
      </div>
    </footer>
  </body>
</html>
