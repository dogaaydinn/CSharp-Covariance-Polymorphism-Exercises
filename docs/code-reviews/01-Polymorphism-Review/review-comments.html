<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Code Review: Animal Sound Feature | Advanced C# Concepts </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Code Review: Animal Sound Feature | Advanced C# Concepts ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/dogaaydinn/CSharp-Covariance-Polymorphism-Exercises/blob/master/docs/code-reviews/01-Polymorphism-Review/review-comments.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="code-review-animal-sound-feature">Code Review: Animal Sound Feature</h1>

<p><strong>Reviewer:</strong> Sarah Chen (Senior Engineer)<br>
<strong>Pull Request:</strong> #1234 - Add animal sound feature<br>
<strong>Author:</strong> Alex Kim (Junior Developer)<br>
<strong>Status:</strong> ‚ùå Changes Requested<br>
<strong>Review Date:</strong> 2025-12-03</p>
<hr>
<h2 id="overall-assessment">Overall Assessment</h2>
<p>Thanks for the PR, Alex! I can see you've put thought into this. The code works, but there are several design issues that will make it hard to maintain as we add more animal types. Let me walk through them.</p>
<p><strong>TL;DR:</strong> This code violates the Open/Closed Principle. Every time we add a new animal type, we'll need to modify multiple methods. We should use polymorphism instead of type checking.</p>
<hr>
<h2 id="-critical-issues-must-fix">üî¥ Critical Issues (Must Fix)</h2>
<h3 id="issue-1-string-based-type-system">Issue 1: String-Based Type System</h3>
<p><strong>Location:</strong> Line 9-10</p>
<pre><code class="lang-csharp">public string Type { get; set; }  // &quot;Dog&quot;, &quot;Cat&quot;, &quot;Bird&quot;
</code></pre>
<p><strong>Problem:</strong></p>
<ul>
<li>No compile-time safety. Someone could do <code>Type = &quot;Doggo&quot;</code> and it would compile but break at runtime.</li>
<li>Easy to make typos: <code>&quot;Dog&quot;</code> vs <code>&quot;dog&quot;</code> vs <code>&quot;DOG&quot;</code> are all different strings.</li>
<li>Can't leverage polymorphism (the main purpose of OOP!).</li>
</ul>
<p><strong>Why This Matters:</strong>
Right now we have 4 animal types. Next sprint, we need to add 10 more (rabbit, horse, snake, etc.). With this design, you'll need to add 10 more <code>if</code> statements to EVERY method. That's not scalable.</p>
<p><strong>Recommendation:</strong>
Use inheritance hierarchy:</p>
<pre><code class="lang-csharp">public abstract class Animal 
{
    public abstract void MakeSound();
}

public class Dog : Animal 
{
    public override void MakeSound() =&gt; Console.WriteLine(&quot;Woof!&quot;);
}
</code></pre>
<p><strong>Learning Resources:</strong></p>
<ul>
<li>See <code>samples/01-Beginner/PolymorphismBasics/</code></li>
<li>Read <code>samples/01-Beginner/PolymorphismBasics/WHY_THIS_PATTERN.md</code></li>
</ul>
<hr>
<h3 id="issue-2-violates-openclosed-principle">Issue 2: Violates Open/Closed Principle</h3>
<p><strong>Location:</strong> Lines 14-29 (MakeSound method)</p>
<pre><code class="lang-csharp">public void MakeSound()
{
    if (Type == &quot;Dog&quot;) { /* ... */ }
    else if (Type == &quot;Cat&quot;) { /* ... */ }
    // ... 4 more conditions
}
</code></pre>
<p><strong>Problem:</strong>
To add a new animal type, you must:</p>
<ol>
<li>Modify the <code>MakeSound()</code> method (add another <code>if</code>)</li>
<li>Modify the <code>PrintInfo()</code> method (add another <code>if</code>)</li>
<li>Modify the <code>FeedAnimal()</code> method (add another <code>if</code>)</li>
<li>Modify the <code>MakeAllAnimalsSounds()</code> validation (add to the condition)</li>
</ol>
<p>That's 4 places to change for ONE new animal type. And if you forget one, bugs!</p>
<p><strong>Why This Matters:</strong>
Last month, someone added &quot;Hamster&quot; to <code>MakeSound()</code> but forgot to add it to <code>FeedAnimal()</code>. Result: runtime crash when feeding hamsters. This design makes bugs inevitable.</p>
<p><strong>Recommendation:</strong>
With polymorphism, adding a new animal requires ZERO changes to existing code:</p>
<pre><code class="lang-csharp">// Just create new class, that's it!
public class Hamster : Animal 
{
    public override void MakeSound() =&gt; Console.WriteLine(&quot;Squeak!&quot;);
    public override void Feed() =&gt; Console.WriteLine(&quot;Feeding hamster with pellets&quot;);
}
</code></pre>
<p><strong>Open/Closed Principle:</strong> Classes should be open for extension, closed for modification.</p>
<hr>
<h3 id="issue-3-no-type-safety">Issue 3: No Type Safety</h3>
<p><strong>Location:</strong> Line 45 (AddAnimal method)</p>
<pre><code class="lang-csharp">public void AddAnimal(string name, string type, int age)
{
    var animal = new Animal { Name = name, Type = type, Age = age };
}
</code></pre>
<p><strong>Problem:</strong></p>
<pre><code class="lang-csharp">// All of these compile, but only the first one works correctly:
service.AddAnimal(&quot;Buddy&quot;, &quot;Dog&quot;, 5);        // ‚úÖ Works
service.AddAnimal(&quot;Buddy&quot;, &quot;dog&quot;, 5);        // ‚ùå Lowercase, fails silently
service.AddAnimal(&quot;Buddy&quot;, &quot;Doggo&quot;, 5);      // ‚ùå Typo, fails silently
service.AddAnimal(&quot;Buddy&quot;, &quot;123&quot;, 5);        // ‚ùå Number as string, fails silently
service.AddAnimal(&quot;Buddy&quot;, null, 5);         // ‚ùå Null, NullReferenceException
</code></pre>
<p><strong>Why This Matters:</strong>
In production last week, a client integration sent <code>type = &quot;dog&quot;</code> (lowercase). Our system accepted it but then failed silently when calling <code>MakeSound()</code> because we check for <code>&quot;Dog&quot;</code> (capital D). Took 2 hours to debug.</p>
<p><strong>Recommendation:</strong>
Use strong types:</p>
<pre><code class="lang-csharp">// This only compiles with valid types:
service.AddAnimal(new Dog { Name = &quot;Buddy&quot;, Age = 5 });
service.AddAnimal(new Cat { Name = &quot;Whiskers&quot;, Age = 3 });

// This doesn't compile (caught at compile time!):
service.AddAnimal(new Dog { Name = &quot;Buddy&quot;, Age = 5, Type = &quot;dog&quot; }); // No Type property!
</code></pre>
<hr>
<h2 id="-major-issues-should-fix">‚ö†Ô∏è Major Issues (Should Fix)</h2>
<h3 id="issue-4-repeated-type-checking">Issue 4: Repeated Type Checking</h3>
<p><strong>Location:</strong> Lines 48-56 (MakeAllAnimalsSounds)</p>
<pre><code class="lang-csharp">if (animal.Type == &quot;Dog&quot; || animal.Type == &quot;Cat&quot; || 
    animal.Type == &quot;Bird&quot; || animal.Type == &quot;Cow&quot;)
{
    animal.MakeSound();
}
</code></pre>
<p><strong>Problem:</strong></p>
<ul>
<li>You're checking if the animal is valid BEFORE calling <code>MakeSound()</code>.</li>
<li>But <code>MakeSound()</code> already checks the type internally (lines 14-29).</li>
<li>Double validation = wasted CPU cycles + duplicate logic.</li>
</ul>
<p><strong>Why This Matters:</strong></p>
<ul>
<li>DRY violation (Don't Repeat Yourself)</li>
<li>If you add &quot;Horse&quot;, you must update TWO places</li>
<li>If validation logic changes, must update TWO places</li>
</ul>
<p><strong>Recommendation:</strong>
With polymorphism, no validation needed:</p>
<pre><code class="lang-csharp">public void MakeAllAnimalsSounds()
{
    foreach (var animal in animals)
    {
        animal.MakeSound(); // Just call it! Polymorphism handles the rest.
    }
}
</code></pre>
<p><strong>Performance:</strong> Micro-benchmark shows polymorphism is actually FASTER than type checking at scale (no string comparisons).</p>
<hr>
<h3 id="issue-5-fragile-getanimalsbytype">Issue 5: Fragile GetAnimalsByType</h3>
<p><strong>Location:</strong> Lines 67-76</p>
<pre><code class="lang-csharp">public List&lt;Animal&gt; GetAnimalsByType(string type)
{
    var result = new List&lt;Animal&gt;();
    foreach (var animal in animals)
    {
        if (animal.Type == type)
        {
            result.Add(animal);
        }
    }
    return result;
}
</code></pre>
<p><strong>Problem:</strong></p>
<ul>
<li>This breaks if caller passes <code>&quot;dog&quot;</code> instead of <code>&quot;Dog&quot;</code> (case sensitivity)</li>
<li>With polymorphism, this method is unnecessary - use LINQ with type checking instead</li>
</ul>
<p><strong>Better Approach:</strong></p>
<pre><code class="lang-csharp">// LINQ with type checking (works with polymorphism)
public List&lt;T&gt; GetAnimalsByType&lt;T&gt;() where T : Animal
{
    return animals.OfType&lt;T&gt;().ToList();
}

// Usage:
var dogs = service.GetAnimalsByType&lt;Dog&gt;();      // Type-safe!
var cats = service.GetAnimalsByType&lt;Cat&gt;();      // No strings!
var rabbits = service.GetAnimalsByType&lt;Rabbit&gt;(); // Won't compile if Rabbit doesn't exist
</code></pre>
<hr>
<h2 id="-suggestions-nice-to-have">üí° Suggestions (Nice to Have)</h2>
<h3 id="issue-6-missing-abstraction-for-feed">Issue 6: Missing Abstraction for Feed</h3>
<p><strong>Location:</strong> Lines 58-66 (FeedAnimal method)</p>
<p><strong>Observation:</strong>
You have <code>MakeSound()</code> on the Animal class, but <code>FeedAnimal()</code> is in the service. This asymmetry is confusing.</p>
<p><strong>Suggestion:</strong>
Make feeding part of the Animal abstraction:</p>
<pre><code class="lang-csharp">public abstract class Animal 
{
    public abstract void MakeSound();
    public abstract void Feed();
}

public class Dog : Animal 
{
    public override void MakeSound() =&gt; Console.WriteLine(&quot;Woof!&quot;);
    public override void Feed() =&gt; Console.WriteLine(&quot;Feeding dog with dog food&quot;);
}
</code></pre>
<p><strong>Reasoning:</strong></p>
<ul>
<li>Sound is an animal behavior ‚Üí on Animal class ‚úÖ</li>
<li>Feeding is also an animal behavior ‚Üí should be on Animal class too</li>
<li>Service should orchestrate, not contain domain logic</li>
</ul>
<hr>
<h3 id="issue-7-printinfo-has-business-logic">Issue 7: PrintInfo Has Business Logic</h3>
<p><strong>Location:</strong> Lines 32-43 (PrintInfo method)</p>
<p><strong>Observation:</strong>
<code>PrintInfo()</code> mixes presentation with business logic:</p>
<pre><code class="lang-csharp">Console.WriteLine(&quot;Dogs are loyal companions&quot;); // Business logic
</code></pre>
<p><strong>Suggestion:</strong>
Separate concerns:</p>
<pre><code class="lang-csharp">public abstract class Animal 
{
    public abstract string GetCharacteristics(); // Business logic
}

public class AnimalPrinter // Presentation logic
{
    public void Print(Animal animal)
    {
        Console.WriteLine($&quot;Name: {animal.Name}, Age: {animal.Age}&quot;);
        Console.WriteLine(animal.GetCharacteristics());
    }
}
</code></pre>
<p><strong>Why:</strong></p>
<ul>
<li>Single Responsibility Principle</li>
<li>Easier to test (can test logic without Console output)</li>
<li>Can swap presentation (GUI, API response, etc.)</li>
</ul>
<hr>
<h2 id="-learning-points">üìö Learning Points</h2>
<h3 id="what-you-did-well-">What You Did Well ‚úÖ</h3>
<ol>
<li><strong>Clear naming</strong> - <code>MakeSound()</code>, <code>FeedAnimal()</code> are self-documenting</li>
<li><strong>Service layer</strong> - Good instinct to separate data management</li>
<li><strong>Working code</strong> - It does what it's supposed to do</li>
<li><strong>Consistent style</strong> - Code is formatted well</li>
</ol>
<h3 id="what-to-learn-next-">What to Learn Next üìñ</h3>
<ol>
<li><p><strong>Polymorphism</strong> - Core OOP concept, solves your type-checking problem</p>
<ul>
<li>Resource: <code>samples/01-Beginner/PolymorphismBasics/</code></li>
</ul>
</li>
<li><p><strong>SOLID Principles</strong> - Especially Open/Closed Principle</p>
<ul>
<li>Resource: <code>samples/03-Advanced/SOLIDPrinciples/OpenClosed/</code></li>
</ul>
</li>
<li><p><strong>Design Patterns</strong> - Strategy pattern applies here</p>
<ul>
<li>Resource: <code>samples/03-Advanced/DesignPatterns/</code></li>
</ul>
</li>
<li><p><strong>Type Safety</strong> - Why compile-time errors &gt; runtime errors</p>
<ul>
<li>Resource: <code>samples/01-Beginner/CastingExamples/WHY_THIS_PATTERN.md</code></li>
</ul>
</li>
</ol>
<hr>
<h2 id="-action-items">üéØ Action Items</h2>
<p><strong>Required Changes:</strong></p>
<ol>
<li>[ ] Refactor to inheritance hierarchy (<code>Animal</code> base, <code>Dog</code>/<code>Cat</code>/etc. derived)</li>
<li>[ ] Remove all type checking (<code>if (Type == ...)</code>)</li>
<li>[ ] Make <code>MakeSound()</code> virtual/abstract on base class</li>
<li>[ ] Fix <code>AddAnimal()</code> to use strong types</li>
<li>[ ] Add unit tests (I noticed there are none! üò±)</li>
</ol>
<p><strong>Suggested Changes:</strong></p>
<ol start="6">
<li>[ ] Move <code>Feed()</code> logic to Animal class</li>
<li>[ ] Separate business logic from presentation in <code>PrintInfo()</code></li>
<li>[ ] Replace <code>GetAnimalsByType(string)</code> with generic <code>GetAnimalsByType&lt;T&gt;()</code></li>
</ol>
<p><strong>Timeline:</strong></p>
<ul>
<li>Please address Required Changes (1-5) before next review</li>
<li>Suggested Changes (6-8) can be in a follow-up PR</li>
</ul>
<hr>
<h2 id="-lets-discuss">üìû Let's Discuss</h2>
<p>I know this is a lot of feedback! Polymorphism is a big topic. Want to pair program on this? I'm free tomorrow 2-4pm. We can:</p>
<ol>
<li>Walk through the polymorphism basics together</li>
<li>Refactor one animal type to the new design</li>
<li>You refactor the rest independently</li>
</ol>
<p>Also, check out <code>docs/code-reviews/01-Polymorphism-Review/fixed-code.cs</code> in this repo - I've implemented the refactored version so you can see what I mean.</p>
<p><strong>Questions?</strong> Ping me on Slack or comment here!</p>
<hr>
<h2 id="-growth-mindset">üèÜ Growth Mindset</h2>
<p>Remember: Senior developers wrote code like this when they were junior too! The difference is they've learned from feedback. You're doing great by:</p>
<ul>
<li>‚úÖ Submitting a PR (many juniors are too scared)</li>
<li>‚úÖ Writing working code</li>
<li>‚úÖ Following team conventions</li>
</ul>
<p>Now you'll learn a foundational OOP pattern that will serve you for your entire career. This is how you level up! üí™</p>
<p><strong>Approved after changes.</strong></p>
<hr>
<p><strong>Review Score:</strong> 3/10 (Functional but needs significant refactoring)<br>
<strong>Estimated Refactor Time:</strong> 2-3 hours<br>
<strong>Pair Programming Offer:</strong> Yes, tomorrow 2pm<br>
<strong>Recommended Reading:</strong> Polymorphism basics + SOLID Open/Closed Principle</p>
<hr>
<p><strong>Next Review:</strong> After you push changes, re-request review from me. I'll prioritize it!</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/dogaaydinn/CSharp-Covariance-Polymorphism-Exercises/blob/master/docs/code-reviews/01-Polymorphism-Review/review-comments.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Copyright ¬© 2024 - Advanced C# Concepts
        </div>
      </div>
    </footer>
  </body>
</html>
